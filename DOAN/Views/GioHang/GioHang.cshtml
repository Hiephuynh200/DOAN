@model IEnumerable<DOAN.Models.DonDatHang>

@{
    ViewBag.Title = "GioHang";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>GioHang</h2>

@*<p>
        @Html.ActionLink("Create New", "Create")
    </p>*@
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.SanPham.TenSP)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SanPham.HinhAnh)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SanPham.GiaBan)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SoLuong)
        </th>
        <th></th>
    </tr>
    @foreach (var item in Model)
    {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.MaSP)
    </td>
    <td>
        <img src="@item.SanPham.HinhAnh" width="180" />
    </td>
    @using (Html.BeginForm("CapnhatGiohang", "GioHang", new { @id = item.SanPham.MaSP}))
    {
        <td>@item.SanPham.GiaBan VNĐ</td>
        <td><input type="number" min="1" max="@item.SanPham.SoLuong" name="txtSolg" value="@item.SoLuong" /></td>
        <td>@Html.DisplayFor(modelItem => item.ThanhTien)</td>
        <td>
            <a href="@Url.Action("Detail", "MainPage", new {id = item.MaSP})">Chi tiết</a>
            | @Html.ActionLink("Xoá", "XoaGioHang", new { @id = item.MaSP })
        </td>
        <td><input type="submit" value="Cập nhật" class="btn btn-success" /></td>
    }
    
    <td>
        @Html.DisplayFor(modelItem => item.ThanhTien)
    </td>
</tr>
    }
    <tr style="font-weight:bold; text-align:left;color:red">
        <td colspan="2">Số loại Sp: @ViewBag.Tongsoluongsanpham</td>
        <td colspan="2">Số lượng Sp: @ViewBag.Tongsoluong</td>
        <td colspan="4">Tổng tiền: @ViewBag.Tongtien VNĐ</td>
    </tr>

    <tr style="font-weight:bold;color:blue;text-align:right">
        <td colspan="5">
            @Html.ActionLink("Xoá giỏ hàng", "XoaTatCaGioHang")
        </td>
    </tr>

    <tr style="font-weight:bold;color:yellow;text-align:right">
        <td colspan="5">
            @Html.ActionLink("Đặt hàng", "DatHang", "GioHang")
        </td>
    </tr>

</table>
